@{
    ViewData["Title"] = "Feed";
}

<div class="admin-page">
    <!-- Welcome Header -->
    <div class="dash-welcome" id="dashWelcome" style="display:none;">
        <div class="dash-welcome-left">
            <div class="dash-welcome-avatar-wrapper" id="dashAvatar"></div>
            <div class="dash-welcome-info">
                <h1 class="dash-welcome-title" id="dashGreeting"></h1>
                <p class="dash-welcome-subtitle" id="dashSubtitle"></p>
            </div>
        </div>
        <div class="dash-welcome-right">
            <div class="dash-welcome-date" id="dashDay"></div>
            <div class="dash-welcome-date-full" id="dashDateFull"></div>
        </div>
    </div>

    <!-- Coming Soon -->
    <div class="feed-coming-soon">
        <div class="feed-coming-soon-icon">
            <span class="material-icons-outlined" style="font-size:3.5rem; color:#667eea;">rocket_launch</span>
        </div>
        <h2 class="feed-coming-soon-title">We will implement soon</h2>
        <p class="feed-coming-soon-desc">The Feed is currently under development. Stay tuned for updates, announcements, and team activity right here.</p>
        <div class="feed-coming-soon-dots">
            <span class="feed-dot"></span>
            <span class="feed-dot"></span>
            <span class="feed-dot"></span>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        (function () {
            function getGreeting() {
                const hour = new Date().getHours();
                if (hour < 12) return 'Good morning';
                if (hour < 17) return 'Good afternoon';
                return 'Good evening';
            }

            function renderDashboard() {
                const user = ChatApp.state.currentUser;
                if (!user) return;

                const dashWelcome = document.getElementById('dashWelcome');
                const dashAvatar = document.getElementById('dashAvatar');
                const dashGreeting = document.getElementById('dashGreeting');
                const dashSubtitle = document.getElementById('dashSubtitle');
                const dashDay = document.getElementById('dashDay');
                const dashDateFull = document.getElementById('dashDateFull');

                // Avatar
                if (user.avatarUrl) {
                    dashAvatar.innerHTML = '<img src="' + ChatApp.utils.escapeHtml(user.avatarUrl) +
                        '" alt="' + ChatApp.utils.escapeHtml(user.fullName) +
                        '" class="dash-welcome-avatar" />';
                } else {
                    dashAvatar.innerHTML = '<div class="dash-welcome-avatar-placeholder" style="background-color:' +
                        ChatApp.utils.getAvatarColor(user.id) + ';">' +
                        ChatApp.utils.getInitials(user.fullName) + '</div>';
                }

                // Greeting
                dashGreeting.textContent = getGreeting() + ', ' + (user.firstName || '') + '!';

                // Subtitle
                let subtitle = '';
                if (user.position) subtitle += user.position;
                if (user.departmentName) subtitle += (subtitle ? ' \u2022 ' : '') + user.departmentName;
                dashSubtitle.textContent = subtitle;

                // Date
                const now = new Date();
                const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
                const months = ['January', 'February', 'March', 'April', 'May', 'June',
                    'July', 'August', 'September', 'October', 'November', 'December'];
                dashDay.textContent = days[now.getDay()];
                dashDateFull.textContent = now.getDate().toString().padStart(2, '0') + ' ' +
                    months[now.getMonth()] + ' ' + now.getFullYear();

                dashWelcome.style.display = '';
            }

            // Wait for state to load
            if (ChatApp.state.currentUser) {
                renderDashboard();
            }
            ChatApp.state.on('userLoaded', renderDashboard);
        })();
    </script>
}