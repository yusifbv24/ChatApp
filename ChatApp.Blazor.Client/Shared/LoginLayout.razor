@inherits LayoutComponentBase

<MudThemeProvider @ref="@_mudThemeProvider"
                  IsDarkMode="@_isDarkMode"
                  IsDarkModeChanged="@(x => _isDarkMode = x)"
                  Theme="_theme" />
<MudDialogProvider />
<MudSnackbarProvider />

<div class="login-layout">
    @Body
</div>

@code {
    private MudThemeProvider? _mudThemeProvider;
    private bool _isDarkMode = false;

    private MudTheme _theme = new MudTheme()
    {
        PaletteLight = new PaletteLight()
        {
            Primary = "#667eea",
            Secondary = "#764ba2",
            Success = "#10B981",
            Warning = "#F59E0B",
            Error = "#EF4444",
            Info = "#3B82F6",
            AppbarBackground = "#FFFFFF",
            Background = "#F8FAFC",
            Surface = "#FFFFFF",
            TextPrimary = "#1F2937",
            TextSecondary = "#6B7280"
        },
        PaletteDark = new PaletteDark()
        {
            Primary = "#818CF8",
            Secondary = "#A78BFA",
            Success = "#34D399",
            Warning = "#FBBF24",
            Error = "#F87171",
            Info = "#60A5FA",
            AppbarBackground = "#1E293B",
            Background = "#0F172A",
            Surface = "#1E293B",
            TextPrimary = "#F1F5F9",
            TextSecondary = "#94A3B8"
        }
    };

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender && _mudThemeProvider != null)
        {
            _isDarkMode = await _mudThemeProvider.GetSystemPreference();
            StateHasChanged();
        }
    }
}