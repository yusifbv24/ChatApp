@inherits LayoutComponentBase

<MudThemeProvider @ref="@_mudThemeProvider" @bind-IsDarkMode="@_isDarkMode" Theme="_theme" />
<MudDialogProvider />
<MudSnackbarProvider />

<div class="auth-layout">
    <div class="auth-content">
        <div class="auth-body">
            @Body
        </div>
    </div>
</div>

<style>
    .auth-layout {
        min-height: 100vh;
        display: flex;
        background: linear-gradient(135deg, #2a3f5f 0%, #1a2332 100%);
    }

    .auth-content {
        width: 100%;
        display: flex;
        flex-direction: column;
    }

    .auth-body {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 24px;
    }

    @@media (max-width: 768px) {
        .auth-body {
            padding: 16px;
        }
    }
</style>

@code {
    private MudThemeProvider? _mudThemeProvider;
    private bool _isDarkMode;

    private MudTheme _theme = new MudTheme()
    {
        PaletteLight = new PaletteLight()
        {
            Primary = "#2BA9E1",
            PrimaryLighten = "rgba(43, 169, 225, 0.1)",
            Secondary = "#6DBCE8",
            Success = "#55D66B",
            Warning = "#FFA900",
            Error = "#FF5752",
            Info = "#2BA9E1",
            Background = "#FFFFFF",
            Surface = "#FFFFFF",
            AppbarBackground = "#FFFFFF",
            DrawerBackground = "#FFFFFF",
            Divider = "rgba(0, 0, 0, 0.08)",
            DividerLight = "rgba(0, 0, 0, 0.05)",
            TextPrimary = "rgba(0, 0, 0, 0.87)",
            TextSecondary = "rgba(0, 0, 0, 0.60)",
            ActionDefault = "rgba(0, 0, 0, 0.54)",
            ActionDisabled = "rgba(0, 0, 0, 0.26)",
            ActionDisabledBackground = "rgba(0, 0, 0, 0.12)",
        },
        PaletteDark = new PaletteDark()
        {
            Primary = "#6DBCE8",
            PrimaryLighten = "rgba(109, 188, 232, 0.16)",
            Secondary = "#2BA9E1",
            Success = "#55D66B",
            Warning = "#FFA900",
            Error = "#FF5752",
            Info = "#6DBCE8",
            Background = "#1A1D24",
            Surface = "#24272E",
            AppbarBackground = "#24272E",
            DrawerBackground = "#24272E",
            Divider = "rgba(255, 255, 255, 0.08)",
            DividerLight = "rgba(255, 255, 255, 0.05)",
            TextPrimary = "rgba(255, 255, 255, 0.92)",
            TextSecondary = "rgba(255, 255, 255, 0.60)",
            ActionDefault = "rgba(255, 255, 255, 0.60)",
            ActionDisabled = "rgba(255, 255, 255, 0.26)",
            ActionDisabledBackground = "rgba(255, 255, 255, 0.12)",
        },
        LayoutProperties = new LayoutProperties()
        {
            DefaultBorderRadius = "8px"
        }
    };

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender && _mudThemeProvider != null)
        {
            _isDarkMode = await _mudThemeProvider.GetSystemPreference();
            StateHasChanged();
        }
    }

    private void ToggleDarkMode()
    {
        _isDarkMode = !_isDarkMode;
    }
}