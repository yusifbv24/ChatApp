@inject NavigationManager Navigation
@inject CustomAuthStateProvider AuthStateProvider

@code {
    protected override async Task OnInitializedAsync()
    {
        // Try to refresh token via session cookie â€” no localStorage dependency
        try
        {
            var authState = await AuthStateProvider.GetAuthenticationStateAsync();

            if (authState.User.Identity?.IsAuthenticated == true)
            {
                // Session cookie was valid, token refreshed successfully
                return;
            }
        }
        catch
        {
            // If anything fails, proceed with redirect
        }

        // Session expired or no valid cookie, redirect to login
        Navigation.NavigateTo("/login", forceLoad: true);
    }
}